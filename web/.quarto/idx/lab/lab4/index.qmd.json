{"title":"Lab 4: ARM Assembly Sort","markdown":{"yaml":{"title":"Lab 4: ARM Assembly Sort"},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n\n\nIn this lab you will learn how to write ARM assembly code to write a simple sorting algorithm.\n\n\n# Learning Objectives\n\nBy the end of this lab you will have:\n\n* Written a simple assembly program to sort an array of signed bytes\n* Used the debugger in SEGGER Embedded Studio to monitor a location in memory.\n\n\n# Requirements\n\nWrite an ARM assembly-language program to sort an array of 12 signed bytes on your MCU.\n\n\n# Instructions\n\n\n## Project Setup\n\nSet up a project in SEGGER Embedded Studio for your MCU. Once your project is created, download the starter code and put it in your src folder or create a new file inside your src directory titled sort.s and copy in the contents of the starter code. \n\nFinish writing the assembly language subroutine under label main in sort.S to sort 12 signed bytes (the ones on the .byte ... line under `arr`). Remember that assembly language code is nearly unreadable without line- by-line comments. If needed, use online reference sheets for ARM Thumb2 Assembly language (like the one linked on the course website) or refer to Chapter 6 of Digital Design and Computer Architecture.\n\n\n::: {.hint-box}\n**Note**: If you are running code on your Nucleo while it is connected to the development board, make sure that you remove the UPduino_+5V jumper to avoid powering the FPGA. Also note that you must have the MCU_+5V jumper connected in order to power the voltage regulators and ensure that the MCU reset signal is pulled high.\n\n:::\n\n## Running and Testing Your Code\n\nBuild your code and enter a debug session. With the MCU board connected via USB, start a debugging session by going to the debug section of the sidebar and pressing the green arrow in the top of the menu (or by using the keyboard shortcut F5). \n\nExamine the memory location where the array of signed bytes has been loaded using the memory location viewer. The memory viewer is normally located near the bottom of the program window, but if you can’t find it, you can access it through the “View” menu in the program toolbar.\n\nYou may also choose to use the “Watch” section of the debugger. For example, if you want to view the contents of the byte array stored in memory, you can enter “`*(char[12] *) arr`” as a Watch expression. This tells the watch window to cast the address of the arr label to a pointer to a character and dereference 12 consecutive values from that memory location.\n\n### {#fig-SEGGER}\n\n![](images/SEGGER_Screenshot.png)\n\nSEGGER Embedded Studio (SES).\n\n:::\n\n\nStep through the operation of your program and see how it changes the values of the array stored in memory.\n\nTo test your code, try various cases with the array in the ``.byte...` line under the `arr` label. Rebuild and start a new debug session every time you make changes.\n\n\n# What to Turn In\n\n\n\n* A short writeup of your design approach and the sort algorithm you chose to implement.\n* A copy of your assembly code file sort.s.\n* A listing of the test cases you used and the output of the tests. Be sure your tests would convince a skeptic that your algorithm works.\n* For your lab checkoff, please have your lab set up and connected to a running debugger session so that the instructor may provide a test case for your code.\n* How many hours did you spend on this lab?","srcMarkdownNoYaml":"\n\n\n# Introduction\n\nIn this lab you will learn how to write ARM assembly code to write a simple sorting algorithm.\n\n\n# Learning Objectives\n\nBy the end of this lab you will have:\n\n* Written a simple assembly program to sort an array of signed bytes\n* Used the debugger in SEGGER Embedded Studio to monitor a location in memory.\n\n\n# Requirements\n\nWrite an ARM assembly-language program to sort an array of 12 signed bytes on your MCU.\n\n\n# Instructions\n\n\n## Project Setup\n\nSet up a project in SEGGER Embedded Studio for your MCU. Once your project is created, download the starter code and put it in your src folder or create a new file inside your src directory titled sort.s and copy in the contents of the starter code. \n\nFinish writing the assembly language subroutine under label main in sort.S to sort 12 signed bytes (the ones on the .byte ... line under `arr`). Remember that assembly language code is nearly unreadable without line- by-line comments. If needed, use online reference sheets for ARM Thumb2 Assembly language (like the one linked on the course website) or refer to Chapter 6 of Digital Design and Computer Architecture.\n\n\n::: {.hint-box}\n**Note**: If you are running code on your Nucleo while it is connected to the development board, make sure that you remove the UPduino_+5V jumper to avoid powering the FPGA. Also note that you must have the MCU_+5V jumper connected in order to power the voltage regulators and ensure that the MCU reset signal is pulled high.\n\n:::\n\n## Running and Testing Your Code\n\nBuild your code and enter a debug session. With the MCU board connected via USB, start a debugging session by going to the debug section of the sidebar and pressing the green arrow in the top of the menu (or by using the keyboard shortcut F5). \n\nExamine the memory location where the array of signed bytes has been loaded using the memory location viewer. The memory viewer is normally located near the bottom of the program window, but if you can’t find it, you can access it through the “View” menu in the program toolbar.\n\nYou may also choose to use the “Watch” section of the debugger. For example, if you want to view the contents of the byte array stored in memory, you can enter “`*(char[12] *) arr`” as a Watch expression. This tells the watch window to cast the address of the arr label to a pointer to a character and dereference 12 consecutive values from that memory location.\n\n### {#fig-SEGGER}\n\n![](images/SEGGER_Screenshot.png)\n\nSEGGER Embedded Studio (SES).\n\n:::\n\n\nStep through the operation of your program and see how it changes the values of the array stored in memory.\n\nTo test your code, try various cases with the array in the ``.byte...` line under the `arr` label. Rebuild and start a new debug session every time you make changes.\n\n\n# What to Turn In\n\n\n\n* A short writeup of your design approach and the sort algorithm you chose to implement.\n* A copy of your assembly code file sort.s.\n* A listing of the test cases you used and the output of the tests. Be sure your tests would convince a skeptic that your algorithm works.\n* For your lab checkoff, please have your lab set up and connected to a running debugger session so that the instructor may provide a test case for your code.\n* How many hours did you spend on this lab?"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"highlight-style":"ally","output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.330","_quarto-vars":{"microps-color":null},"theme":["cosmo","../../custom.scss"],"monobackgroundcolor":"transparent","title":"Lab 4: ARM Assembly Sort"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}